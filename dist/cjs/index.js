"use strict";var t=require("react"),e=function(){return e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var r=function(){function e(t){this.setStateArrMap={},this.stateChangeListenerArrMap={},this.pageState=t&&t()||{}}return e.prototype.useCommonState=function(e){var r=this,n=t.useState()[1];t.useEffect((function(){return r._addSetStateToArr(e,n),function(){r._removeSetStateFromArr(e,n)}}),[]);return[this.pageState[e],function(t){r.setState(e,t)}]},e.prototype.getState=function(t){return this.pageState[t]},e.prototype.setState=function(t,e){if("function"==typeof e){var r=e(this.pageState[t]);this._onStateChange(t,r)}else{r=e;this._onStateChange(t,r)}},e.prototype.addStateChangeListener=function(t,e){var r=this.stateChangeListenerArrMap[t];void 0===r&&(r=[],this.stateChangeListenerArrMap[t]=r),r.push(e)},e.prototype.removeStateChangeListener=function(t,e){var r=this.stateChangeListenerArrMap[t];if(r)for(var n=0;n<r.length;){r[n]===e?r.splice(n,1):n++}},e.prototype._addSetStateToArr=function(t,e){var r=this.setStateArrMap[t];void 0===r&&(r=[],this.setStateArrMap[t]=r),r.push(e)},e.prototype._removeSetStateFromArr=function(t,e){var r=this.setStateArrMap[t];if(r)for(var n=0;n<r.length;){r[n]===e?r.splice(n,1):n++}},e.prototype._onStateChange=function(t,e){this.pageState[t]=e;var r=this.setStateArrMap[t];r&&r.forEach((function(t){return t({})}));var n=this.stateChangeListenerArrMap[t];n&&n.forEach((function(t){return t(e)}))},e}();function n(e){var r=t.useContext(e).stateController;if(!r)throw new Error("usePageState() Error: Page Component not use withPageStateProvider");return r}function o(t,e){return n(e).useCommonState(t)}function a(e){return function(r){return t.createElement(i,{getInitState:r.getInitState,StateContext:e},r.children)}}function u(r,n,o){return function(a){return t.createElement(i,{getInitState:o,StateContext:n},t.createElement(r,e({},a)))}}function i(e){var n=t.useState((function(){return{stateController:new r(e.getInitState)}}))[0];return t.createElement(e.StateContext.Provider,{value:n},e.children)}var s=t.createContext({});var p=t.createContext({});var c=t.createContext({});exports.AppStateProvider=function(t){return a(s)(t)},exports.ComponentStateProvider=function(t){return a(c)(t)},exports.PageStateProvider=function(t){return a(p)(t)},exports.getUseAppState=function(){var t=n(s);return function(e){return t.useCommonState(e)}},exports.getUseComponentState=function(){var t=n(c);return function(e){return t.useCommonState(e)}},exports.getUsePageState=function(){var t=n(p);return function(e){return t.useCommonState(e)}},exports.useAppState=function(t){return o(t,s)},exports.useAppStateController=function(){return n(s)},exports.useComponentState=function(t){return o(t,c)},exports.useComponentStateController=function(){return n(c)},exports.usePageState=function(t){return o(t,p)},exports.usePageStateController=function(){return n(p)},exports.withAppStateProvider=function(t,e){return u(t,s,e)},exports.withComponentStateProvider=function(t,e){return u(t,c,e)},exports.withPageStateProvider=function(t,e){return u(t,p,e)};
//# sourceMappingURL=index.js.map
