import t,{useContext as e,useState as r,useEffect as n,createContext as o}from"react";var a=function(){return a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var i=function(){function t(t){this.setStateArrMap={},this.stateChangeListenerArrMap={},this.pageState=t&&t()||{}}return t.prototype.useCommonState=function(t){var e=this,o=r()[1];n((function(){return e._addSetStateToArr(t,o),function(){e._removeSetStateFromArr(t,o)}}),[]);return[this.pageState[t],function(r){e.setState(t,r)}]},t.prototype.getState=function(t){return this.pageState[t]},t.prototype.setState=function(t,e){if("function"==typeof e){var r=e(this.pageState[t]);this._onStateChange(t,r)}else{r=e;this._onStateChange(t,r)}},t.prototype.addStateChangeListener=function(t,e){var r=this.stateChangeListenerArrMap[t];void 0===r&&(r=[],this.stateChangeListenerArrMap[t]=r),r.push(e)},t.prototype.removeStateChangeListener=function(t,e){var r=this.stateChangeListenerArrMap[t];if(r)for(var n=0;n<r.length;){r[n]===e?r.splice(n,1):n++}},t.prototype._addSetStateToArr=function(t,e){var r=this.setStateArrMap[t];void 0===r&&(r=[],this.setStateArrMap[t]=r),r.push(e)},t.prototype._removeSetStateFromArr=function(t,e){var r=this.setStateArrMap[t];if(r)for(var n=0;n<r.length;){r[n]===e?r.splice(n,1):n++}},t.prototype._onStateChange=function(t,e){this.pageState[t]=e;var r=this.setStateArrMap[t];r&&r.forEach((function(t){return t({})}));var n=this.stateChangeListenerArrMap[t];n&&n.forEach((function(t){return t(e)}))},t}();function u(t){var r=e(t).stateController;if(!r)throw new Error("usePageState() Error: Page Component not use withPageStateProvider");return r}function c(t,e){return u(e).useCommonState(t)}function s(e){return function(r){return t.createElement(p,{getInitState:r.getInitState,StateContext:e},r.children)}}function f(e,r,n){return function(o){return t.createElement(p,{getInitState:n,StateContext:r},t.createElement(e,a({},o)))}}function p(e){var n=r((function(){return{stateController:new i(e.getInitState)}}))[0];return t.createElement(e.StateContext.Provider,{value:n},e.children)}function S(t){return c(t,C)}function h(){var t=u(C);return function(e){return t.useCommonState(e)}}function v(t,e){return f(t,C,e)}function g(t){return s(C)(t)}function m(){return u(C)}var C=o({});function l(t){return c(t,M)}function d(){var t=u(M);return function(e){return t.useCommonState(e)}}function A(t,e){return f(t,M,e)}function y(t){return s(M)(t)}function E(){return u(M)}var M=o({});function L(t){return c(t,I)}function _(){var t=u(I);return function(e){return t.useCommonState(e)}}function P(t,e){return f(t,I,e)}function w(t){return s(I)(t)}function x(){return u(I)}var I=o({});export{g as AppStateProvider,w as ComponentStateProvider,y as PageStateProvider,h as getUseAppState,_ as getUseComponentState,d as getUsePageState,S as useAppState,m as useAppStateController,L as useComponentState,x as useComponentStateController,l as usePageState,E as usePageStateController,v as withAppStateProvider,P as withComponentStateProvider,A as withPageStateProvider};
//# sourceMappingURL=index.js.map
